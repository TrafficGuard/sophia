<ng-container *ngIf="chat$ | async as chat">
  <ng-container *ngIf="true">
    <!-- Chat container-->
    <div fxLayout="column" fxLayoutAlign="space-between stretch" style="width: 50%; min-width: 600px; height: 100vh;">
      <!-- Messages-->
      <div class="messages-container">
        <ng-container *ngFor="let msg of chat.messages; trackBy: trackByCreated; let i = index">
          <app-chat-message
            [msg]="msg"
            [predecessor]="i - 1 >= 0 ? chat.messages[i - 1] : null"
          ></app-chat-message>
        </ng-container>
      </div>

      <!-- Send form and other controls -->
      <app-chat-controls style="width: 100%" [chatId]="chat.id" (messageSent)="onMessageSent($event)"></app-chat-controls>
    </div>
  </ng-container>
</ng-container>
